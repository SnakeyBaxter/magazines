<!DOCTYPE html>
<html lang="en">

<head>
<title>Magazine Search</title>
<meta charset="UTF-8">
<script src="https://unpkg.com/react@15.3.2/dist/react.js"></script>
<script src="https://unpkg.com/react-dom@15.3.2/dist/react-dom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
<script src="http://www.contamination-horror.co.uk/magazines/magazines.js"></script>
<link href="contamination.css" rel="stylesheet" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
#results{
	width: 80%;
	height: 100%;
	margin: 0 auto 0 auto;
}

input{
	width: 40%;
	margin: 0 30px 10px 30px;
}

button{
	margin-left: 30px;
}

#content{
    height: 30px;
    background-color: yellow;
}
</style>
</head>

<body class="myElement">

<div id="Header"><h1>Magazine Database Search</h1></div>
<div id="Wrapper"> 
    <p>This is a work-in-progress. Enter a term to search the database of vintage horror film magazines and fanzines.</p>
    <p>E.g search for a film title, or part of film title, a director, or actor.</p>
    <p>The database will grow when I get time to add data from my collection and other sources.</p>
	
	<div id="content"></div>
    
</div>


<script type="text/babel">
		    
	var Button = React.createClass({
		  search: function () {
			
			var query = document.getElementById("query").value.toUpperCase();
			if(query){                      //don't allow empty text box
				var results = document.getElementById("results");
				results.innerHTML = "<br>";   //delete previous results
				for(var i = 0; i < magazines.length; i++){	
					for(var prop in magazines[i]) {
						if(magazines[i][prop].includes(query)){
							results.innerHTML += "<p><strong>" + magazines[i]["Magazine"] + "</strong>" + " contains article on " + magazines[i][prop] + "</p>";
			
			
							} 
						} 
					}
				} else {
					alert("Please enter a search term!");
				}
		  },

		  render: function () {
		  
			return (
					<div>
						<input type="text" id="query"></input>
						<button onClick = {this.search}>SEARCH</button>
						<div id="results"></div>
					</div>
					)
			}
		});
        
            
			
			
	ReactDOM.render(
		<Button />, 
		document.getElementById("content")
	
	);
            
</script>
		


</body>
</html>